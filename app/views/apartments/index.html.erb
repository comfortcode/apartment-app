<h1>Listing Apartments</h1>

<%= search_form_for @search do |f| %>
  <div class="field">
    <%= f.label :area_id_eq %>
    <%= f.select( :area_id_eq, Area.all.collect {|a| [ a.name, a.id ] }) %>
  </div>
    <div class="field">
    <%= f.label :rental_type_id_eq %>
    <%= f.select( :rental_type_id_eq, RentalType.all.collect {|r| [ r.name, r.id ] }) %>
  </div>
  <div class="field">
    <%= f.label :from_date_lteq, "Available as of"%>
    <%= f.date_select :from_date_lteq %>
  <div class ="field">
    <%= f.label :beds_gteq, "Minimum Bedrooms" %>
    <%= f.number_field :beds_gteq, :step => 0.5 %>    
  </div>
  <div class ="actions">
    <%= f.submit "Search" %>
  </div>
<% end %>

<table>
  <thead>
    <tr>
      <th>Street</th>
      <th>Area</th>
      <th>Rental Type</th>
      <th>User</th>
      <th>From date</th>
      <th>To date</th>
      <th>To date open</th>
      <th>Flex dates</th>
      <th>Price</th>
      <th>Currency</th>
      <th>Price neg</th>
      <th>Agent fee</th>
      <th>Furnished</th>
      <th>Package</th>
      <th>Flights</th>
      <th>Beds</th>
      <th>Baths</th>
      <th>Description</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @apartments.each do |apartment| %>
      <tr>
        <td><%= apartment.street %></td>
        <td><%= apartment.area.name if apartment.area %></td>
        <td><%= apartment.rental_type.name if apartment.rental_type %></td>
        <td><%= apartment.user.email %></td>
        <td><%= apartment.from_date %></td>
        <td><%= apartment.to_date %></td>
        <td><%= apartment.to_date_open %></td>
        <td><%= apartment.flex_dates %></td>
        <td><%= apartment.price %></td>
        <td><%= apartment.currency.symbol.html_safe if apartment.currency %></td>
        <td><%= apartment.price_neg %></td>
        <td><%= apartment.agent_fee %></td>
        <td><%= apartment.furnished %></td>
        <td><%= apartment.package %></td>
        <td><%= apartment.flights %></td>
        <td><%= apartment.beds %></td>
        <td><%= apartment.baths %></td>
        <td><%= apartment.description %></td>
        <td><%= link_to 'Show', apartment %></td>
        <td><%= link_to 'Edit', edit_apartment_path(apartment) %></td>
        <td><%= link_to 'Destroy', apartment, method: :delete, data: { confirm: 'Are you sure you want to delete this apartment listing?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Apartment', new_apartment_path %>
